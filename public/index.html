<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003366">
    <meta name="description" content="SmartMail - Sistema profissional de envio de emails em massa para NEXTFROTAS">
    <title>SmartMail | NEXTFROTAS</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon.png">
    <link rel="apple-touch-icon" href="assets/icon-512.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <style>
        /* ===== RESET E VARI√ÅVEIS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Cores NEXTFROTAS */
            --primary-blue: #003366;
            --primary-orange: #FF6600;
            --secondary-blue: #004080;
            --light-blue: #E6F0FF;
            --dark-blue: #001a33;
            
            /* Cores de suporte */
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            
            /* Status colors */
            --success: #10B981;
            --success-light: #D1FAE5;
            --success-dark: #065F46;
            --error: #EF4444;
            --error-light: #FEE2E2;
            --error-dark: #991B1B;
            --warning: #F59E0B;
            --warning-light: #FEF3C7;
            --warning-dark: #92400E;
            --info: #3B82F6;
            --info-light: #DBEAFE;
            --info-dark: #1E40AF;
            
            /* Espa√ßamentos */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            
            /* Sombras */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            /* Border radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            /* Transi√ß√µes */
            --transition-fast: 150ms;
            --transition-base: 200ms;
            --transition-slow: 300ms;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-blue) 100%);
            min-height: 100vh;
            color: var(--gray-900);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: 280px;
            background: var(--white);
            border-right: 2px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 100;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .sidebar-header {
            padding: var(--spacing-xl);
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-bottom: 2px solid var(--primary-orange);
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        .brand-logo {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            background: var(--white);
            padding: 4px;
            box-shadow: var(--shadow-md);
        }

        .brand-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .sidebar-brand h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            margin: 0;
        }

        .sidebar-subtitle {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .nav-section {
            padding: var(--spacing-lg) var(--spacing-md);
        }

        .nav-section-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 var(--spacing-md) var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-md);
            border-radius: var(--radius-lg);
            color: var(--gray-700);
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            margin-bottom: var(--spacing-xs);
            border: 2px solid transparent;
        }

        .nav-item:hover {
            background: var(--light-blue);
            color: var(--primary-blue);
            border-color: var(--primary-blue);
            transform: translateX(4px);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary-orange), #FF8833);
            color: var(--white);
            border-color: var(--primary-orange);
            box-shadow: var(--shadow-md);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .sidebar-footer {
            padding: var(--spacing-lg);
            border-top: 2px solid var(--gray-200);
            margin-top: auto;
            background: var(--gray-50);
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 2px solid var(--gray-200);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.online {
            background: var(--success);
            box-shadow: 0 0 0 3px var(--success-light);
        }

        .status-dot.offline {
            background: var(--error);
            box-shadow: 0 0 0 3px var(--error-light);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: var(--spacing-xl) var(--spacing-2xl);
        }

        .container {
            background: var(--white);
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            border: 2px solid var(--gray-200);
            width: 100%;
            max-width: 100%;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            padding: var(--spacing-xl) var(--spacing-2xl);
            text-align: center;
            border-bottom: 3px solid var(--primary-orange);
        }

        .logo-container {
            margin-bottom: var(--spacing-md);
        }

        .logo {
            height: 60px;
            width: auto;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--spacing-sm);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--white);
            margin-top: var(--spacing-lg);
            backdrop-filter: blur(10px);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        /* ===== FORM SECTIONS ===== */
        .form-content {
            padding: var(--spacing-xl);
        }

        .form-section {
            margin-bottom: var(--spacing-2xl);
        }

        .form-section:last-child {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--primary-orange);
        }

        .section-icon {
            width: 24px;
            height: 24px;
            color: var(--primary-orange);
        }

        .info-box {
            background: var(--light-blue);
            border-left: 4px solid var(--primary-blue);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-lg);
        }

        .info-box h4 {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 0.9375rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: var(--spacing-sm);
        }

        .info-box ol {
            margin-left: var(--spacing-lg);
            color: var(--gray-700);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .info-box li {
            margin-bottom: var(--spacing-xs);
        }

        /* ===== FORM FIELDS ===== */
        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        label {
            display: block;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--spacing-sm);
        }

        label .required {
            color: var(--error);
            margin-left: var(--spacing-xs);
        }

        input[type="text"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-family: inherit;
            transition: all var(--transition-base);
            background: var(--white);
        }

        input[type="text"]:hover,
        input[type="email"]:hover,
        textarea:hover {
            border-color: var(--primary-blue);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-orange);
            box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.1);
        }

        textarea {
            min-height: 150px;
            resize: vertical;
            line-height: 1.6;
        }

        .help-text {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 0.8125rem;
            color: var(--gray-500);
            margin-top: var(--spacing-xs);
        }

        /* ===== EMAIL TAGS ===== */
        .email-tags-container {
            min-height: 60px;
            padding: var(--spacing-md);
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius-lg);
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-sm);
            background: var(--gray-50);
            transition: all var(--transition-base);
        }

        .email-tags-container:hover {
            border-color: var(--primary-blue);
            background: var(--white);
        }

        .email-tags-container.empty::after {
            content: "Nenhum destinat√°rio adicionado";
            color: var(--gray-400);
            font-size: 0.875rem;
            font-style: italic;
        }

        .email-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: var(--white);
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 2px solid var(--primary-blue);
            animation: slideIn var(--transition-base);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .email-tag button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--white);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            font-size: 1rem;
            line-height: 1;
        }

        .email-tag button:hover {
            background: var(--error);
            transform: rotate(90deg);
        }

        .email-count-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 var(--spacing-sm);
            background: var(--primary-orange);
            color: var(--white);
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-left: var(--spacing-sm);
        }

        /* ===== FILE UPLOAD ===== */
        .file-upload-area {
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
            background: var(--gray-50);
        }

        .file-upload-area:hover,
        .file-upload-area.dragover {
            border-color: var(--primary-orange);
            background: var(--light-blue);
            transform: scale(1.02);
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--spacing-md);
            color: var(--primary-blue);
        }

        .file-upload-area h4 {
            color: var(--gray-700);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .file-upload-area p {
            color: var(--gray-500);
            font-size: 0.875rem;
        }

        .file-upload-area .browse {
            color: var(--primary-orange);
            font-weight: 700;
            text-decoration: underline;
        }

        .file-list {
            margin-top: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--white);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            transition: all var(--transition-base);
        }

        .file-item:hover {
            border-color: var(--primary-blue);
            box-shadow: var(--shadow-md);
        }

        .file-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .file-icon.img { background: #FEE2E2; color: #DC2626; }
        .file-icon.pdf { background: #DBEAFE; color: #2563EB; }
        .file-icon.doc { background: #E0E7FF; color: #4F46E5; }
        .file-icon.xls { background: #D1FAE5; color: #059669; }
        .file-icon.zip { background: #FEF3C7; color: #D97706; }
        .file-icon.other { background: var(--gray-200); color: var(--gray-600); }

        .file-info {
            flex: 1;
            min-width: 0;
        }

        .file-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--gray-900);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-size {
            font-size: 0.8125rem;
            color: var(--gray-500);
            margin-top: 2px;
        }

        .file-remove {
            background: var(--error-light);
            border: 2px solid var(--error);
            color: var(--error);
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            flex-shrink: 0;
        }

        .file-remove:hover {
            background: var(--error);
            color: var(--white);
            transform: scale(1.1);
        }

        .files-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--light-blue);
            border-radius: var(--radius-lg);
            border: 2px solid var(--primary-blue);
        }

        .files-summary span {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary-blue);
        }

        .btn-clear-files {
            background: var(--error);
            border: 2px solid var(--error-dark);
            color: var(--white);
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: inherit;
        }

        .btn-clear-files:hover {
            background: var(--error-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ===== BUTTONS ===== */
        .btn-primary {
            width: 100%;
            padding: var(--spacing-lg) var(--spacing-xl);
            background: linear-gradient(135deg, var(--primary-orange), #FF8833);
            border: 2px solid var(--primary-orange);
            color: var(--white);
            font-size: 1.125rem;
            font-weight: 700;
            border-radius: var(--radius-xl);
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            box-shadow: var(--shadow-lg);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #FF8833, var(--primary-orange));
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--white);
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
        }

        .btn-secondary:hover {
            background: var(--primary-blue);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ===== STATUS MESSAGES ===== */
        .status-message {
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-top: var(--spacing-lg);
            font-size: 0.9375rem;
            font-weight: 600;
            border: 2px solid;
            display: none;
            animation: slideDown var(--transition-base);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .status-message.show {
            display: block;
        }

        .status-message.success {
            background: var(--success-light);
            border-color: var(--success);
            color: var(--success-dark);
        }

        .status-message.error {
            background: var(--error-light);
            border-color: var(--error);
            color: var(--error-dark);
        }

        .status-message.warning {
            background: var(--warning-light);
            border-color: var(--warning);
            color: var(--warning-dark);
        }

        .status-message.info {
            background: var(--info-light);
            border-color: var(--info);
            color: var(--info-dark);
        }

        /* ===== MODAL ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-xl);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: var(--white);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            border: 2px solid var(--gray-200);
            animation: modalSlideIn var(--transition-slow);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--primary-orange);
        }

        .modal p {
            margin-bottom: var(--spacing-md);
            line-height: 1.6;
            color: var(--gray-700);
        }

        .modal ol, .modal ul {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            color: var(--gray-700);
        }

        .modal li {
            margin-bottom: var(--spacing-sm);
            line-height: 1.6;
        }

        .modal-close {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--primary-orange);
            border: 2px solid var(--primary-orange);
            color: var(--white);
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: inherit;
            margin-top: var(--spacing-lg);
        }

        .modal-close:hover {
            background: #FF8833;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-md);
            background: var(--gray-50);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-sm);
        }

        .shortcut-key {
            background: var(--primary-blue);
            color: var(--white);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            font-weight: 600;
            font-family: monospace;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform var(--transition-base);
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: var(--spacing-lg);
            }

            .header h1 {
                font-size: 1.75rem;
            }

            .logo {
                height: 60px;
            }

            .form-content {
                padding: var(--spacing-lg);
            }

            .btn-primary {
                font-size: 1rem;
                padding: var(--spacing-md) var(--spacing-lg);
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: var(--spacing-lg);
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .logo {
                height: 50px;
            }

            .form-content {
                padding: var(--spacing-md);
            }

            .form-section {
                margin-bottom: var(--spacing-lg);
            }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <div class="brand-logo">
                        <img src="assets/logo.png" alt="NEXTFROTAS">
                    </div>
                    <div>
                        <h1>SmartMail</h1>
                        <div class="sidebar-subtitle">NEXTFROTAS</div>
                    </div>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-label">Principal</div>
                <div class="nav-item active">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>
                    Novo Envio
                </div>
                <div class="nav-item" onclick="testConnection()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>
                    Testar Conex√£o
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-label">Ferramentas</div>
                <div class="nav-item" onclick="clearForm()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
                    Limpar Formul√°rio
                </div>
                <div class="nav-item" onclick="openShortcuts()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><path d="M6 9h1"/><path d="M17 9h1"/><path d="M11 9h2"/><path d="M6 13h12"/></svg>
                    Atalhos
                </div>
                <div class="nav-item" onclick="openSettings()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"/></svg>
                    Configura√ß√µes
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-label">Informa√ß√µes</div>
                <div class="nav-item" onclick="openHelp()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                    Ajuda
                </div>
                <div class="nav-item" onclick="openAbout()">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                    Sobre
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="server-status">
                    <div class="status-dot" id="sidebarStatusDot"></div>
                    <span id="sidebarStatusText">Conectando...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <div class="header">
                    <div class="logo-container">
                        <img src="assets/logo.png" alt="NEXTFROTAS Logo" class="logo">
                    </div>
                    <h1>SmartMail</h1>
                    <p>Sistema Profissional de Envio de Emails em Massa</p>
                    <div class="status-badge" id="serverStatus">
                        <div class="status-indicator"></div>
                        <span>Verificando conex√£o...</span>
                    </div>
                </div>

                <div class="form-content">
                    <div class="info-box">
                        <h4>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                            Como usar
                        </h4>
                        <ol>
                            <li>Adicione os emails dos destinat√°rios (pressione Enter ap√≥s cada um)</li>
                            <li>Preencha o assunto e a mensagem do email</li>
                            <li>Opcionalmente, anexe arquivos arrastando ou clicando na √°rea de upload</li>
                            <li>Clique em "Enviar Emails" para disparar para todos</li>
                        </ol>
                    </div>

                    <form id="emailForm" onsubmit="sendEmails(event)">
                        <!-- Sender Info -->
                        <div class="form-section">
                            <div class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                Informa√ß√µes do Remetente
                            </div>

                            <div class="form-group">
                                <label for="senderName">Seu Nome (Opcional)</label>
                                <input type="text" id="senderName" placeholder="Jo√£o Silva">
                                <div class="help-text">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                                    Nome que aparecer√° como remetente
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="senderEmail">Seu Email (Remetente) <span class="required">*</span></label>
                                <input type="email" id="senderEmail" placeholder="seu.email@exemplo.com" required>
                            </div>
                        </div>

                        <!-- Recipients -->
                        <div class="form-section">
                            <div class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                                Adicionar Destinat√°rio <span class="required">*</span>
                                <span class="email-count-badge" id="emailCount">0 emails</span>
                            </div>

                            <div class="form-group">
                                <input type="email" id="recipientEmail" placeholder="destinatario@exemplo.com">
                                <div class="help-text">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                                    Digite um email e pressione Enter
                                </div>
                                <div class="email-tags-container empty" id="emailTags"></div>
                            </div>
                        </div>

                        <!-- Message -->
                        <div class="form-section">
                            <div class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                                Conte√∫do do Email
                            </div>

                            <div class="form-group">
                                <label for="subject">Assunto <span class="required">*</span></label>
                                <input type="text" id="subject" placeholder="Digite o assunto do email" required>
                            </div>

                            <div class="form-group">
                                <label for="message">Mensagem <span class="required">*</span></label>
                                <textarea id="message" placeholder="Digite a mensagem do email..." required></textarea>
                                <div class="help-text">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                                    A mesma mensagem ser√° enviada para todos os destinat√°rios
                                </div>
                            </div>
                        </div>

                        <!-- Attachments -->
                        <div class="form-section">
                            <div class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
                                Anexos (Opcional)
                            </div>

                            <div class="file-upload-area" id="dropZone" onclick="document.getElementById('fileInput').click()">
                                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                                <h4>Arraste arquivos aqui ou <span class="browse">clique para selecionar</span></h4>
                                <p>Imagens, PDFs, documentos, planilhas, comprovantes (max 25MB total)</p>
                            </div>
                            <input type="file" id="fileInput" multiple hidden accept="image/*,.pdf,.doc,.docx,.xls,.xlsx,.csv,.ppt,.pptx,.txt,.zip,.rar">
                            <div class="file-list" id="fileList"></div>
                            <div class="files-summary" id="filesSummary" style="display: none;">
                                <span id="filesTotalInfo"></span>
                                <button type="button" class="btn-clear-files" onclick="clearAllFiles()">Remover todos</button>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn-primary" id="sendBtn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>
                            Enviar Emails
                        </button>

                        <div class="status-message" id="statusMessage"></div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <h3>Como Usar o SmartMail</h3>
            <p><strong>1.</strong> Preencha seu nome (opcional) e email de remetente.</p>
            <p><strong>2.</strong> Adicione os emails dos destinat√°rios. Voc√™ pode colar v√°rios de uma vez separados por v√≠rgula ou pressionar Enter ap√≥s cada um.</p>
            <p><strong>3.</strong> Escreva o assunto e a mensagem do email.</p>
            <p><strong>4.</strong> Opcionalmente, anexe arquivos arrastando ou clicando na √°rea de upload (m√°ximo 25MB total).</p>
            <p><strong>5.</strong> Clique em "Enviar Emails" para disparar para todos os destinat√°rios.</p>
            <p><strong>Dica:</strong> Use o bot√£o "Testar Conex√£o" na barra lateral para verificar se o servidor de email est√° configurado corretamente antes de enviar.</p>
            <button class="modal-close" onclick="closeModal('helpModal')">Entendi</button>
        </div>
    </div>

    <div class="modal-overlay" id="shortcutsModal">
        <div class="modal">
            <h3>Atalhos de Teclado</h3>
            <div class="shortcut-item">
                <span>Adicionar destinat√°rio</span>
                <span class="shortcut-key">Enter</span>
            </div>
            <div class="shortcut-item">
                <span>Limpar formul√°rio</span>
                <span class="shortcut-key">Ctrl + L</span>
            </div>
            <div class="shortcut-item">
                <span>Enviar emails</span>
                <span class="shortcut-key">Ctrl + Enter</span>
            </div>
            <div class="shortcut-item">
                <span>Abrir ajuda</span>
                <span class="shortcut-key">F1</span>
            </div>
            <button class="modal-close" onclick="closeModal('shortcutsModal')">Fechar</button>
        </div>
    </div>

    <div class="modal-overlay" id="aboutModal">
        <div class="modal">
            <h3>SmartMail v2.0</h3>
            <p><strong>Sistema profissional de envio de emails em massa com suporte a anexos.</strong></p>
            <p>Desenvolvido exclusivamente para <strong>NEXTFROTAS</strong> com tecnologias modernas e interface profissional.</p>
            <p style="margin-top: 16px;"><strong>Tecnologias:</strong></p>
            <ul>
                <li>Node.js + Express</li>
                <li>Nodemailer</li>
                <li>Multer (upload de arquivos)</li>
                <li>HTML5 + CSS3 + JavaScript</li>
            </ul>
            <p style="margin-top: 16px;"><strong>Suporta:</strong> Gmail, SMTP, SendGrid, AWS SES</p>
            <button class="modal-close" onclick="closeModal('aboutModal')">Fechar</button>
        </div>
    </div>

    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <h3>Configura√ß√µes</h3>
            <p><strong>Modo de Desenvolvimento:</strong> <span id="devModeStatus">Verificando...</span></p>
            <p><strong>Servi√ßo de Email:</strong> <span id="emailServiceStatus">Verificando...</span></p>
            <p><strong>Email Configurado:</strong> <span id="emailConfigStatus">Verificando...</span></p>
            <p style="margin-top: 16px; color: var(--gray-500); font-size: 0.875rem;">
                Para alterar as configura√ß√µes de email, edite o arquivo <code>.env</code> no servidor.
            </p>
            <button class="modal-close" onclick="closeModal('settingsModal')">Fechar</button>
        </div>
    </div>

    <script>
        // Detectar automaticamente a URL da API
        const API_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:3000/api'
            : '/api';
        
        const recipientEmailInput = document.getElementById('recipientEmail');
        const emailTagsContainer = document.getElementById('emailTags');
        const emailCountDisplay = document.getElementById('emailCount');
        const statusMessage = document.getElementById('statusMessage');
        const serverStatus = document.getElementById('serverStatus');
        const sidebarStatusDot = document.getElementById('sidebarStatusDot');
        const sidebarStatusText = document.getElementById('sidebarStatusText');
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const filesSummary = document.getElementById('filesSummary');
        const filesTotalInfo = document.getElementById('filesTotalInfo');
        const sendBtn = document.getElementById('sendBtn');

        let recipientEmails = [];
        let attachedFiles = [];
        const MAX_TOTAL_SIZE = 25 * 1024 * 1024; // 25MB

        // Check server status on load
        checkServerStatus();
        setInterval(checkServerStatus, 30000);

        // Email input handler
        recipientEmailInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addEmail();
            }
        });

        // File upload handlers
        dropZone.addEventListener('dragover', function(e) {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', function() {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', function(e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', function() {
            handleFiles(fileInput.files);
            fileInput.value = '';
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                clearForm();
            }
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('emailForm').dispatchEvent(new Event('submit'));
            }
            if (e.key === 'F1') {
                e.preventDefault();
                openHelp();
            }
        });

        async function checkServerStatus() {
            try {
                const response = await fetch(`${API_URL}/health`);
                const data = await response.json();
                
                if (data.status === 'ok') {
                    const statusText = data.devMode ? 'üü° Online (Modo Dev)' : 'üü¢ Online';
                    serverStatus.innerHTML = `<div class="status-indicator"></div><span>${statusText}</span>`;
                    sidebarStatusDot.className = 'status-dot online';
                    sidebarStatusText.textContent = data.devMode ? 'Modo Dev' : 'Online';
                } else {
                    throw new Error('Status n√£o OK');
                }
            } catch (error) {
                serverStatus.innerHTML = '<div class="status-indicator" style="background: var(--error);"></div><span>üî¥ Servidor Desconectado</span>';
                sidebarStatusDot.className = 'status-dot offline';
                sidebarStatusText.textContent = 'Desconectado';
            }
        }

        async function testConnection() {
            try {
                showStatus('Testando conex√£o com servidor de email...', 'info');
                
                const response = await fetch(`${API_URL}/test-connection`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showStatus('‚úÖ ' + data.message, 'success');
                } else {
                    showStatus('‚ùå ' + data.message + ': ' + data.error, 'error');
                }
            } catch (error) {
                showStatus('‚ùå Erro ao conectar com o servidor: ' + error.message, 'error');
            }
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function addEmail() {
            const email = recipientEmailInput.value.trim();
            
            if (!email) return;

            // Handle multiple emails separated by comma
            const emails = email.split(',').map(e => e.trim()).filter(e => e);
            
            for (const e of emails) {
                if (!isValidEmail(e)) {
                    showStatus('Por favor, insira um email v√°lido: ' + e, 'error');
                    continue;
                }

                if (recipientEmails.includes(e)) {
                    showStatus('Este email j√° foi adicionado: ' + e, 'warning');
                    continue;
                }

                recipientEmails.push(e);
            }

            recipientEmailInput.value = '';
            updateEmailTags();
            hideStatus();
        }

        function removeEmail(email) {
            recipientEmails = recipientEmails.filter(e => e !== email);
            updateEmailTags();
        }

        function updateEmailTags() {
            emailTagsContainer.innerHTML = '';
            
            if (recipientEmails.length === 0) {
                emailTagsContainer.classList.add('empty');
            } else {
                emailTagsContainer.classList.remove('empty');
            }
            
            recipientEmails.forEach(email => {
                const tag = document.createElement('div');
                tag.className = 'email-tag';
                tag.innerHTML = `
                    ${email}
                    <button type="button" onclick="removeEmail('${email}')">√ó</button>
                `;
                emailTagsContainer.appendChild(tag);
            });

            emailCountDisplay.textContent = recipientEmails.length + (recipientEmails.length === 1 ? ' email' : ' emails');
        }

        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const totalSize = attachedFiles.reduce((sum, f) => sum + f.size, 0) + files[i].size;
                
                if (totalSize > MAX_TOTAL_SIZE) {
                    showStatus('Limite de 25MB excedido. Remova alguns arquivos.', 'error');
                    return;
                }
                
                if (attachedFiles.some(f => f.name === files[i].name && f.size === files[i].size)) {
                    continue;
                }
                
                attachedFiles.push(files[i]);
            }
            renderFileList();
        }

        function removeFile(index) {
            attachedFiles.splice(index, 1);
            renderFileList();
        }

        function clearAllFiles() {
            attachedFiles = [];
            renderFileList();
        }

        function getFileType(name) {
            const ext = name.split('.').pop().toLowerCase();
            if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg', 'webp'].includes(ext)) return 'img';
            if (ext === 'pdf') return 'pdf';
            if (['doc', 'docx'].includes(ext)) return 'doc';
            if (['xls', 'xlsx', 'csv'].includes(ext)) return 'xls';
            if (['zip', 'rar', '7z'].includes(ext)) return 'zip';
            return 'other';
        }

        function getFileTypeLabel(type) {
            const labels = {
                'img': 'IMG',
                'pdf': 'PDF',
                'doc': 'DOC',
                'xls': 'XLS',
                'zip': 'ZIP',
                'other': 'FILE'
            };
            return labels[type] || 'FILE';
        }

        function formatSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        function renderFileList() {
            fileList.innerHTML = '';
            
            attachedFiles.forEach((file, i) => {
                const type = getFileType(file.name);
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `
                    <div class="file-icon ${type}">${getFileTypeLabel(type)}</div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${formatSize(file.size)}</div>
                    </div>
                    <button type="button" class="file-remove" onclick="removeFile(${i})">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                `;
                fileList.appendChild(div);
            });

            const totalSize = attachedFiles.reduce((sum, f) => sum + f.size, 0);
            
            if (attachedFiles.length > 0) {
                filesSummary.style.display = 'flex';
                filesTotalInfo.textContent = `${attachedFiles.length} arquivo(s) - ${formatSize(totalSize)} de 25MB`;
            } else {
                filesSummary.style.display = 'none';
            }
        }

        async function sendEmails(event) {
            event.preventDefault();

            if (recipientEmails.length === 0) {
                showStatus('Por favor, adicione pelo menos um destinat√°rio.', 'error');
                return;
            }

            const senderName = document.getElementById('senderName').value.trim();
            const senderEmail = document.getElementById('senderEmail').value.trim();
            const subject = document.getElementById('subject').value.trim();
            const message = document.getElementById('message').value.trim();

            showStatus('Enviando emails...', 'info');
            sendBtn.disabled = true;

            try {
                const formData = new FormData();
                formData.append('senderName', senderName);
                formData.append('senderEmail', senderEmail);
                formData.append('subject', subject);
                formData.append('message', message);
                recipientEmails.forEach(email => formData.append('recipients', email));
                attachedFiles.forEach(file => formData.append('attachments', file));

                const response = await fetch(`${API_URL}/send-emails`, {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.success) {
                    showStatus(`‚úÖ Emails enviados com sucesso! ${data.successCount} de ${data.totalCount} enviados.`, 'success');
                    
                    if (data.failedCount > 0) {
                        showStatus(`‚ö†Ô∏è ${data.failedCount} email(s) falharam. Verifique os logs.`, 'warning');
                    }
                    
                    // Clear form after success
                    setTimeout(() => {
                        clearForm();
                    }, 3000);
                } else {
                    showStatus('‚ùå Erro ao enviar emails: ' + data.message, 'error');
                }
            } catch (error) {
                showStatus('‚ùå Erro ao conectar com o servidor: ' + error.message, 'error');
            } finally {
                sendBtn.disabled = false;
            }
        }

        function clearForm() {
            if (recipientEmails.length > 0 || attachedFiles.length > 0) {
                if (!confirm('Tem certeza que deseja limpar o formul√°rio?')) {
                    return;
                }
            }
            
            document.getElementById('emailForm').reset();
            recipientEmails = [];
            attachedFiles = [];
            updateEmailTags();
            renderFileList();
            hideStatus();
        }

        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = 'status-message show ' + type;
        }

        function hideStatus() {
            statusMessage.className = 'status-message';
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
            
            // Load settings if opening settings modal
            if (modalId === 'settingsModal') {
                loadSettings();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function openHelp() {
            openModal('helpModal');
        }

        function openShortcuts() {
            openModal('shortcutsModal');
        }

        function openAbout() {
            openModal('aboutModal');
        }

        function openSettings() {
            openModal('settingsModal');
        }

        async function loadSettings() {
            try {
                const response = await fetch(`${API_URL}/health`);
                const data = await response.json();
                
                document.getElementById('devModeStatus').textContent = data.devMode ? 'Ativo' : 'Desativado';
                document.getElementById('emailServiceStatus').textContent = data.emailService || 'N√£o configurado';
                document.getElementById('emailConfigStatus').textContent = data.emailConfigured ? data.emailUser : 'N√£o configurado';
            } catch (error) {
                document.getElementById('devModeStatus').textContent = 'Erro ao carregar';
                document.getElementById('emailServiceStatus').textContent = 'Erro ao carregar';
                document.getElementById('emailConfigStatus').textContent = 'Erro ao carregar';
            }
        }

        // Close modals when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    overlay.classList.remove('show');
                }
            });
        });
    </script>
</body>
</html>
